<!doctype html>
<html lang="en"><head><meta charset="utf-8"><meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1"><title>Node.js MVC框架 未完 笔记整理 - Mr.sun的东鳞西爪</title><link rel="manifest" href="/manifest.json"><meta name="application-name" content="Mr.sun的东鳞西爪"><meta name="apple-mobile-web-app-capable" content="yes"><meta name="apple-mobile-web-app-title" content="Mr.sun的东鳞西爪"><meta name="apple-mobile-web-app-status-bar-style" content="default"><meta name="description" content="[TOC]这个框架有点像drupal&amp;#x2F; Node.jsMVC框架Adonis介绍与准备 node 8、npm 3以上版本 全局范围安装：1npm install @adonisjs&amp;#x2F;cli --global  创建应用并运行应用12cd ~&amp;#x2F;desktopadonis new sunwei-adonis 使用模版blueprint：1adonis new sunwei-adonis ---blue"><meta property="og:type" content="article"><meta property="og:title" content="Node.js MVC框架 未完 笔记整理"><meta property="og:url" content="http://gini0.github.io/2018/07/25/Node-js-MVC%E6%A1%86%E6%9E%B6-%E7%AC%94%E8%AE%B0%E6%95%B4%E7%90%86/"><meta property="og:site_name" content="Mr.sun的东鳞西爪"><meta property="og:description" content="[TOC]这个框架有点像drupal&amp;#x2F; Node.jsMVC框架Adonis介绍与准备 node 8、npm 3以上版本 全局范围安装：1npm install @adonisjs&amp;#x2F;cli --global  创建应用并运行应用12cd ~&amp;#x2F;desktopadonis new sunwei-adonis 使用模版blueprint：1adonis new sunwei-adonis ---blue"><meta property="og:locale" content="en_US"><meta property="og:image" content="evernotecid://9A67477A-D574-4790-9D02-79AC4C197FC4/appyinxiangcom/9302176/ENResource/p1239"><meta property="article:published_time" content="2018-07-25T06:38:42.000Z"><meta property="article:modified_time" content="2018-11-25T14:46:38.000Z"><meta property="article:author" content="SW"><meta property="article:tag" content="js"><meta property="article:tag" content="后端"><meta property="twitter:card" content="summary"><meta property="twitter:image" content="evernotecid://9A67477A-D574-4790-9D02-79AC4C197FC4/appyinxiangcom/9302176/ENResource/p1239"><script type="application/ld+json">{"@context":"https://schema.org","@type":"BlogPosting","mainEntityOfPage":{"@type":"WebPage","@id":"http://gini0.github.io/2018/07/25/Node-js-MVC%E6%A1%86%E6%9E%B6-%E7%AC%94%E8%AE%B0%E6%95%B4%E7%90%86/"},"headline":"Node.js MVC框架 未完 笔记整理","image":[],"datePublished":"2018-07-25T06:38:42.000Z","dateModified":"2018-11-25T14:46:38.000Z","author":{"@type":"Person","name":"SW"},"publisher":{"@type":"Organization","name":"Mr.sun的东鳞西爪","logo":{"@type":"ImageObject","url":"http://gini0.github.io/images/logo.jpeg"}},"description":"[TOC]这个框架有点像drupal&#x2F; Node.jsMVC框架Adonis介绍与准备 node 8、npm 3以上版本 全局范围安装：1npm install @adonisjs&#x2F;cli --global  创建应用并运行应用12cd ~&#x2F;desktopadonis new sunwei-adonis 使用模版blueprint：1adonis new sunwei-adonis ---blue"}</script><link rel="canonical" href="http://gini0.github.io/2018/07/25/Node-js-MVC%E6%A1%86%E6%9E%B6-%E7%AC%94%E8%AE%B0%E6%95%B4%E7%90%86/"><link rel="stylesheet" href="https://use.fontawesome.com/releases/v5.15.2/css/all.css"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/highlight.js@9.12.0/styles/atom-one-light.css"><link rel="stylesheet" href="https://fonts.googleapis.com/css2?family=Ubuntu:wght@400;600&amp;family=Source+Code+Pro"><link rel="stylesheet" href="/css/default.css"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/lightgallery@1.10.0/dist/css/lightgallery.min.css"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/justifiedGallery@3.8.1/dist/css/justifiedGallery.min.css"><style>body>.footer,body>.navbar,body>.section{opacity:0}</style><!--!--><!--!--><style>.pace{-webkit-pointer-events:none;pointer-events:none;-webkit-user-select:none;-moz-user-select:none;user-select:none}.pace-inactive{display:none}.pace .pace-progress{background:#3273dc;position:fixed;z-index:2000;top:0;right:100%;width:100%;height:2px}</style><script src="https://cdn.jsdelivr.net/npm/pace-js@1.2.4/pace.min.js"></script><!-- hexo injector head_end start --><script>
  (function () {
      function switchTab() {
          if (!location.hash) {
            return;
          }
          Array
              .from(document.querySelectorAll('.tab-content'))
              .forEach($tab => {
                  $tab.classList.add('is-hidden');
              });
          Array
              .from(document.querySelectorAll('.tabs li'))
              .forEach($tab => {
                  $tab.classList.remove('is-active');
              });
          const $activeTab = document.querySelector(location.hash);
          if ($activeTab) {
              $activeTab.classList.remove('is-hidden');
          }
          const $tabMenu = document.querySelector(`a[href="${location.hash}"]`);
          if ($tabMenu) {
              $tabMenu.parentElement.classList.add('is-active');
          }
      }
      switchTab();
      window.addEventListener('hashchange', switchTab, false);
  })();
  </script><!-- hexo injector head_end end --><meta name="generator" content="Hexo 6.2.0"></head><body class="is-3-column"><nav class="navbar navbar-main"><div class="container navbar-container"><div class="navbar-brand justify-content-center"><a class="navbar-item navbar-logo" href="/"><img src="/images/logo.jpeg" alt="Mr.sun的东鳞西爪" height="28"></a></div><div class="navbar-menu"><div class="navbar-start"><a class="navbar-item" href="/">Home</a><a class="navbar-item" href="/archives">Archives</a><a class="navbar-item" href="/categories">Categories</a><a class="navbar-item" href="/tags">Tags</a></div><div class="navbar-end"><a class="navbar-item" target="_blank" rel="noopener" title="Email to me" href="mailto:swceo@njhuifou.com"><i class="fa fa-envelope"></i></a><a class="navbar-item search" title="Search" href="javascript:;"><i class="fas fa-search"></i></a></div></div></div></nav><section class="section"><div class="container"><div class="columns"><div class="column order-2 column-main is-8-tablet is-8-desktop is-6-widescreen"><div class="card"><article class="card-content article" role="article"><div class="article-meta is-size-7 is-uppercase level is-mobile"><div class="level-left"><span class="level-item">Posted&nbsp;<time dateTime="2018-07-25T06:38:42.000Z" title="2018-7-25 2:38:42 ├F10: PM┤">2018-07-25</time></span><span class="level-item">Updated&nbsp;<time dateTime="2018-11-25T14:46:38.000Z" title="2018-11-25 10:46:38 ├F10: PM┤">2018-11-25</time></span><span class="level-item"><a class="link-muted" href="/categories/%E6%8A%80%E6%9C%AF/">技术</a></span><span class="level-item">30 minutes read (About 4568 words)</span></div></div><h1 class="title is-3 is-size-4-mobile">Node.js MVC框架 未完 笔记整理</h1><div class="content"><p>[TOC]<br>这个框架有点像drupal/</p>
<h1 id="Node-js"><a href="#Node-js" class="headerlink" title="Node.js"></a>Node.js</h1><h2 id="MVC框架Adonis"><a href="#MVC框架Adonis" class="headerlink" title="MVC框架Adonis"></a>MVC框架Adonis</h2><h3 id="介绍与准备"><a href="#介绍与准备" class="headerlink" title="介绍与准备"></a>介绍与准备</h3><ol>
<li>node 8、npm 3以上版本</li>
<li>全局范围安装：<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">npm install @adonisjs/cli --global </span><br></pre></td></tr></table></figure></li>
<li>创建应用并运行应用<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">cd ~/desktop</span><br><span class="line">adonis new sunwei-adonis</span><br></pre></td></tr></table></figure>
使用模版blueprint：<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">adonis new sunwei-adonis ---blueprint ninghao/ninghao-adonis-blueprint </span><br></pre></td></tr></table></figure></li>
<li><p>启动服务器</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">adonis serve --dev </span><br></pre></td></tr></table></figure>
</li>
<li><p>版本控制<br>git init<br>git add .<br>git commit -m ‘init’<br>创建仓库，添加远程地址<br>git push -u origin master</p>
</li>
</ol>
<h3 id="快速起步："><a href="#快速起步：" class="headerlink" title="快速起步："></a>快速起步：</h3><h4 id="路由"><a href="#路由" class="headerlink" title="路由"></a>路由</h4><p>打开目录：<br>start–routes.js 定义路由<br>设置：<br><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="title class_">Route</span>.<span class="title function_">get</span>(<span class="string">&#x27;/hello&#x27;</span>,<span class="function">(<span class="params">&#123; request &#125;</span>)=&gt;</span>&#123;</span><br><span class="line">  <span class="keyword">return</span> <span class="string">`hello~ <span class="subst">$&#123; request.input(<span class="string">&#x27;name&#x27;</span>)&#125;</span>`</span></span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure></p>
<p>访问：<br><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">http</span>:<span class="comment">//localhost:3333/hello?name=sunwei</span></span><br></pre></td></tr></table></figure></p>
<p>这个路由的视图文件就是：resources ——views——hello.edge</p>
<h4 id="控制器"><a href="#控制器" class="headerlink" title="控制器"></a>控制器</h4><ol>
<li><p>创建控制器</p>
<span id="more"></span>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">adonis <span class="attr">make</span>:controller <span class="title class_">Hello</span></span><br></pre></td></tr></table></figure></li>
<li>选择http request的这个选项</li>
<li>创建目录后添加方法render：<br>render：交给的方法。通俗的讲就是把context的内容, 加载进templates中定义的文件, 并通过浏览器渲染呈现.<br>render(request, template_name, context=None, content_type=None, status=None, using=None)</li>
</ol>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">class</span> <span class="title class_">HelloController</span> &#123;</span><br><span class="line">   <span class="title function_">render</span>(<span class="params">&#123;request&#125;</span>)&#123;</span><br><span class="line">     <span class="keyword">return</span> <span class="string">`hello~ <span class="subst">$&#123; request.input(<span class="string">&#x27;name&#x27;</span>)&#125;</span>`</span></span><br><span class="line">   &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<ol start="4">
<li>再在路由中设置：<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="title class_">Route</span>.<span class="title function_">get</span>(<span class="string">&#x27;/hello&#x27;</span>,<span class="string">&#x27;HelloController.render&#x27;</span>)</span><br></pre></td></tr></table></figure>
</li>
</ol>
<h4 id="视图"><a href="#视图" class="headerlink" title="视图"></a>视图</h4><p>Provider：重复的需要一个类中的方法时，可封装它为服务类，以便重复使用，如http。</p>
<p>这里面里面有一个view的provider，就是有一个view的方法，那就把view这个参数解构出来。<br><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">class</span> <span class="title class_">HelloController</span> &#123;</span><br><span class="line">   <span class="title function_">render</span>(<span class="params">&#123;request,view&#125;</span>)&#123;</span><br><span class="line">     <span class="keyword">const</span> name = request.<span class="title function_">input</span>(<span class="string">&#x27;name&#x27;</span>)</span><br><span class="line">     <span class="keyword">return</span> view.<span class="title function_">render</span>(<span class="string">&#x27;hello&#x27;</span>,&#123; name &#125;)</span><br><span class="line">   &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></p>
<p>创建一个edge视图：<br><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">adonis make:view hello</span><br></pre></td></tr></table></figure><br>然后views下面会有一个edge的文件<br>添加html文件。atom添加edge插件<br>hello ~</p>
<h4 id="数据库"><a href="#数据库" class="headerlink" title="数据库"></a>数据库</h4><ol>
<li>默认使用sqlite<br>在config——database.js里面<br>在项目下安装：<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">adonis install sqlite3 </span><br></pre></td></tr></table></figure></li>
<li>这儿用的是python2版本<br>用到migration的功能,创建post这个表<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">adonis make:migration Post</span><br></pre></td></tr></table></figure></li>
<li>选择create table<br>在database里面看到 schema.js<br>在up里面添加：<figure class="highlight js"><figcaption><span>table.string('title')</span></figcaption><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">table.<span class="title function_">text</span>(‘content<span class="string">&#x27;,&#x27;</span>longtext<span class="string">&#x27;)</span></span><br></pre></td></tr></table></figure>
执行：</li>
<li>adonis migration:run</li>
</ol>
<h5 id="插入与查询数据"><a href="#插入与查询数据" class="headerlink" title="插入与查询数据"></a>插入与查询数据</h5><ol>
<li><p>打开routes.js 使用database</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="title class_">Database</span> = <span class="title function_">use</span>(<span class="string">&#x27;Database&#x27;</span>)</span><br><span class="line"></span><br><span class="line"><span class="title class_">Route</span>.<span class="title function_">get</span>(<span class="string">&#x27;/posts&#x27;</span>,<span class="title function_">async</span>()=&gt;&#123;</span><br><span class="line">  <span class="keyword">return</span> <span class="keyword">await</span> <span class="title class_">Database</span>.<span class="title function_">table</span>(<span class="string">&#x27;posts&#x27;</span>).<span class="title function_">select</span>(<span class="string">&#x27;*&#x27;</span>)</span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure>
</li>
<li><p>访问<br>localhost:3333/posts</p>
</li>
<li><p>用命令行插入数据，使用repl命令交互模式<br>a)输入 adonis repl</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">await use(‘Database’).table(&#x27;posts&#x27;).insert(&#123;title:&#x27;apple&#x27;,content:&#x27;a&#x27;&#125;)</span><br><span class="line">await use(&#x27;Database&#x27;).table(&#x27;posts&#x27;).insert(&#123;title:&#x27;lemon&#x27;,content:&#x27;b&#x27;&#125;)</span><br></pre></td></tr></table></figure>
</li>
</ol>
<h2 id="路由-1"><a href="#路由-1" class="headerlink" title="路由"></a>路由</h2><h3 id="路由-2"><a href="#路由-2" class="headerlink" title="路由"></a>路由</h3><h4 id="路由：简介"><a href="#路由：简介" class="headerlink" title="路由：简介"></a>路由：简介</h4><p>两个参数，一个是地址，箭头函数直接返回的值<br>用postman访问 返回的就List of posts<br><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="title class_">Route</span>.<span class="title function_">get</span>(<span class="string">&#x27;/posts&#x27;</span>,<span class="function">()=&gt;</span><span class="string">&#x27;List of posts&#x27;</span>) </span><br></pre></td></tr></table></figure></p>
<h4 id="路由方法：Posts"><a href="#路由方法：Posts" class="headerlink" title="路由方法：Posts"></a>路由方法：Posts</h4><p>想从客户端那里得到数据，可以让客户端用 HTTP 的 Post 方法;<br>把数据发送过来,要让客户端修改数据，可能使用HTTP的put或者patch方法：<br>要请求删除内容，http的delete方法。</p>
<p>post方法：<br><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="title class_">Route</span>.<span class="title function_">post</span>(<span class="string">&#x27;/posts&#x27;</span>,<span class="function">()=&gt;</span><span class="string">&#x27;post has been created&#x27;</span>)</span><br></pre></td></tr></table></figure><br>\\ 把中间件注释掉 shield ，kernel</p>
<h4 id="路由参数-Parameters"><a href="#路由参数-Parameters" class="headerlink" title="路由参数:Parameters"></a>路由参数:Parameters</h4><ol>
<li>:id 为必填，　:id?为选填<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="title class_">Route</span>.<span class="title function_">get</span>(<span class="string">&#x27;/posts/:id?&#x27;</span>,<span class="function">(<span class="params">&#123; params &#125;</span>)=&gt;</span>&#123;</span><br><span class="line">   <span class="keyword">return</span> <span class="string">`you are watching <span class="subst">$&#123;params.id&#125;</span> . `</span></span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure></li>
<li>访问：get方法<br>localhost:3333/posts/33<br>you are watching 33</li>
</ol>
<h4 id="路由方法：put-patch-与-delete"><a href="#路由方法：put-patch-与-delete" class="headerlink" title="路由方法：put/patch 与 delete"></a>路由方法：put/patch 与 delete</h4><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="title class_">Route</span>.<span class="title function_">patch</span>(<span class="string">&#x27;/posts/:id?&#x27;</span>,<span class="function">(<span class="params">&#123; params &#125;</span>)=&gt;</span>&#123;</span><br><span class="line">   <span class="keyword">return</span> <span class="string">`post <span class="subst">$&#123;params.id&#125;</span> has been updated. `</span></span><br><span class="line">&#125;)</span><br><span class="line"></span><br><span class="line"><span class="title class_">Route</span>.<span class="title function_">delete</span>(<span class="string">&#x27;/posts/:id?&#x27;</span>,<span class="function">(<span class="params">&#123; params &#125;</span>)=&gt;</span>&#123;</span><br><span class="line">   <span class="keyword">return</span> <span class="string">`post <span class="subst">$&#123;params.id&#125;</span> has been removed . `</span></span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure>
<h4 id="绑定控制器"><a href="#绑定控制器" class="headerlink" title="绑定控制器"></a>绑定控制器</h4><p>绑定控制器：为了业务保持简单，一般不放在路由服务器中处理.<br>App-controller-http-post<br><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">adonis make:controller Post</span><br></pre></td></tr></table></figure><br>在控制器的类里面添加方法，后面又导出了这个控制器，在路由里面，指定某个控制器的某个方法处理路由地址的请求<br>1、在控制器Postcontroller里面<br><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">class</span> <span class="title class_">PostController</span> &#123;</span><br><span class="line">   <span class="title function_">index</span>(<span class="params"></span>)&#123;</span><br><span class="line">     <span class="keyword">return</span> <span class="string">&#x27;list of post&#x27;</span></span><br><span class="line">   &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></p>
<p>module.exports = PostController</p>
<p>2、在路由里面使用这个方法：<br><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="title class_">Route</span>.<span class="title function_">get</span>(<span class="string">&#x27;/posts&#x27;</span>,<span class="string">&#x27;PostController.index&#x27;</span>)</span><br></pre></td></tr></table></figure></p>
<p>3、postman，get这个localhost:3333/posts</p>
<h3 id="资源"><a href="#资源" class="headerlink" title="资源"></a>资源</h3><h4 id="理解资源"><a href="#理解资源" class="headerlink" title="理解资源"></a>理解资源</h4><p>应用里面的内容，用户，评论，还有商品等等，这些东西都可以看成是应用里的资源Resrouces针对某个资源，我们可以去创建一组惯用的路由，然后再创建一组控制器方法，用它们去处理对资源的请求 。</p>
<ul>
<li>假设应用上面有有一种资源叫Post，它表示的是应用里的内容，对于这种资源，可以创建一个控制器，叫 PostController。<br>在这个控制器里再去创建一些方法来处理对资源的不同的请求。</li>
<li>一般资源的路由地址都是资源的复数形式，比如 User，用户资源，它的地址可以是 users。如果是 Post 资源，那它的地址可以是 posts。</li>
<li>index<br>直接用 HTTP 的 get 方法请求这个地址，应该返回资源的列表，处理请求的控制器方法的名字应该是 index（这只是一种惯用的命名方式 .. 并不是强制的）</li>
<li>store<br>如果用 HTTP 的 post 方法请求资源地址的时候，可以使用控制器里的 store 方法来处理，通常这种请求就是去创建新的资源，所以在 store 方法里面，可以把客户端发送过来的数据，保存到应用的数据库里 </li>
<li>show<br>客户端想得到单个资源，它可以使用 get 方法请求资源名，加上资源 id 这种形式的地址，这种请求会用控制器的 show 方法来处理。在方法里，可以根据请求地址里面的 id 这个参数的值，到应用的数据库里，把这个资源找出来，然后再把结果返回给客户端 。</li>
<li>update<br>修改资源的内容，可以在客户端那里用 PUT 或者 PATCH 这两个 HTTP 方法，去请求资源名加资源 id 这种形式的地址，处理请求用的对应的控制器的方法的名字是 update，表示更新。方法里面可以根据请求地址里的 id 参数的值，还有客户端发送过来的要修改的数据。找到对应的资源，再把资源的更新之后的数据放到数据库里。</li>
<li>delete<br>客户端那里也可以发送删除资源的请求，请求用的方法是 DELETE ，请求的地址就是资源的名字，加上要删除的资源的 id 号， 处理这种请求用的控制器的方法的名字是 destroy。</li>
<li>create 与 edit<br>在创建还有编辑资源的时候，你可能需要给用户提供一个创建还有编辑资源用的表单，显示创建资源用的表单，可以用 http 的 get 方法请求资源名，加上 create 这个路由地址，这个请求用控制器里的 create 方法来处理。<br>返回编辑资源用的表单，路由地址是资源名，加上资源 id ，再加上一个 edit，这个请求可以交给控制器的 edit 方法来处理。</li>
</ul>
<h4 id="设置路由和绑定方法"><a href="#设置路由和绑定方法" class="headerlink" title="设置路由和绑定方法"></a>设置路由和绑定方法</h4><p>控制器：app-controllers-http-posts<br><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">class</span> <span class="title class_">PostController</span> &#123;</span><br><span class="line">   <span class="title function_">index</span>(<span class="params"></span>)&#123;</span><br><span class="line">     <span class="keyword">return</span> <span class="string">&#x27;list of post&#x27;</span></span><br><span class="line">   &#125;</span><br><span class="line">   <span class="title function_">store</span>(<span class="params"></span>)&#123;</span><br><span class="line">     <span class="keyword">return</span> <span class="string">&#x27;post has been created&#x27;</span></span><br><span class="line">   &#125;</span><br><span class="line">   <span class="title function_">show</span>(<span class="params">&#123;params&#125;</span>)&#123;</span><br><span class="line">     <span class="keyword">return</span> <span class="string">`you are watching <span class="subst">$&#123;params.id&#125;</span> . `</span></span><br><span class="line">   &#125;</span><br><span class="line">   <span class="title function_">update</span>(<span class="params">&#123;params&#125;</span>)&#123;</span><br><span class="line">     <span class="keyword">return</span> <span class="string">`post <span class="subst">$&#123;params.id&#125;</span> has been updated. `</span></span><br><span class="line">   &#125;</span><br><span class="line">   <span class="title function_">destroy</span>(<span class="params">&#123;params&#125;</span>)&#123;</span><br><span class="line">     <span class="keyword">return</span> <span class="string">`post <span class="subst">$&#123;params.id&#125;</span> has been removed . `</span></span><br><span class="line">   &#125;</span><br><span class="line">   <span class="title function_">create</span>(<span class="params"></span>)&#123;</span><br><span class="line">     <span class="keyword">return</span> <span class="string">`create post . `</span></span><br><span class="line">   &#125;</span><br><span class="line">   <span class="title function_">edit</span>(<span class="params">&#123;params&#125;</span>)&#123;</span><br><span class="line">     <span class="keyword">return</span> <span class="string">`Editing post <span class="subst">$&#123;params.id&#125;</span>. `</span></span><br><span class="line">   &#125;</span><br></pre></td></tr></table></figure></p>
<p>设置路由：starts-route.js<br><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="title class_">Route</span>.<span class="title function_">get</span>(<span class="string">&#x27;/posts&#x27;</span>,<span class="string">&#x27;PostController.index&#x27;</span>)</span><br><span class="line"></span><br><span class="line"><span class="title class_">Route</span>.<span class="title function_">post</span>(<span class="string">&#x27;/posts&#x27;</span>,<span class="string">&#x27;PostController.store&#x27;</span>)</span><br><span class="line"></span><br><span class="line"><span class="title class_">Route</span>.<span class="title function_">get</span>(<span class="string">&#x27;/posts/create&#x27;</span>,<span class="string">&#x27;PostController.create&#x27;</span>)</span><br><span class="line"></span><br><span class="line"><span class="title class_">Route</span>.<span class="title function_">get</span>(<span class="string">&#x27;/posts/:id&#x27;</span>,<span class="string">&#x27;PostController.show&#x27;</span>)</span><br><span class="line"></span><br><span class="line"><span class="title class_">Route</span>.<span class="title function_">patch</span>(<span class="string">&#x27;/posts/:id&#x27;</span>,<span class="string">&#x27;PostController.update&#x27;</span>)</span><br><span class="line"></span><br><span class="line"><span class="title class_">Route</span>.<span class="title function_">delete</span>(<span class="string">&#x27;/posts/:id&#x27;</span>,<span class="string">&#x27;PostController.destroy&#x27;</span>)</span><br><span class="line"></span><br><span class="line"><span class="title class_">Route</span>.<span class="title function_">get</span>(‘/posts/:id/edit<span class="string">&#x27;,&#x27;</span><span class="title class_">PostController</span>.<span class="property">edit</span><span class="string">&#x27;)</span></span><br></pre></td></tr></table></figure></p>
<h4 id="更简单的方法-resource方法"><a href="#更简单的方法-resource方法" class="headerlink" title="更简单的方法 resource方法"></a>更简单的方法 resource方法</h4><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="title class_">Route</span></span><br><span class="line">     .<span class="title function_">resource</span>(<span class="string">&#x27;posts&#x27;</span>,<span class="string">&#x27;PostController&#x27;</span>)</span><br><span class="line">     .<span class="title function_">apiOnly</span>() <span class="comment">//只需要提供接口，定义资源路由，去掉创建和编辑资源的路由</span></span><br><span class="line">     .<span class="title function_">only</span>([‘index<span class="string">&#x27;,&#x27;</span>show<span class="string">&#x27;,]) //只提供某些方法</span></span><br></pre></td></tr></table></figure>
<h3 id="其他"><a href="#其他" class="headerlink" title="其他"></a>其他</h3><h4 id="路由命名：as的方法"><a href="#路由命名：as的方法" class="headerlink" title="路由命名：as的方法"></a>路由命名：as的方法</h4><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="title class_">Route</span></span><br><span class="line">  .<span class="title function_">get</span>(<span class="string">&#x27;/users&#x27;</span>,<span class="function">()=&gt;</span><span class="string">&#x27;list of users.&#x27;</span>)</span><br><span class="line">  .<span class="title function_">as</span>(<span class="string">&#x27;users.index&#x27;</span>) <span class="comment">//get的方法是地址，as命名路由的名字</span></span><br></pre></td></tr></table></figure>
<p>改变html,连接的到路由的名字<br><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">&lt;a style=<span class="string">&quot;color:#fff&quot;</span> href=<span class="string">&quot;&#123;&#123; route(&#x27;users.index&#x27;) &#125;&#125;&quot;</span>&gt;<span class="title class_">List</span> <span class="keyword">of</span> users&lt;/a&gt;</span><br><span class="line"></span><br></pre></td></tr></table></figure></p>
<p>后面改get的地址，还是不会变，因为连接到的是路由的名字<br><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">.get(&#x27;/list-of-users&#x27;,()=&gt;&#x27;list of users.&#x27;)</span><br></pre></td></tr></table></figure></p>
<h4 id="路由格式："><a href="#路由格式：" class="headerlink" title="路由格式："></a>路由格式：</h4><p>比如json，html等,判断用户请求的路由格式,然后根据不同的格式，做出不同的响应.<br>Route.js<br><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line"><span class="title class_">Route</span>.<span class="title function_">get</span>(<span class="string">&#x27;/users&#x27;</span>,<span class="function">(<span class="params">&#123; request &#125;</span>) =&gt;</span> &#123;</span><br><span class="line">  <span class="keyword">switch</span> (request.<span class="title function_">format</span>()) &#123;</span><br><span class="line">    <span class="keyword">case</span> <span class="string">&#x27;json&#x27;</span>:</span><br><span class="line">       <span class="keyword">return</span> [</span><br><span class="line">         &#123;<span class="attr">name</span>:<span class="string">&#x27;sunwei&#x27;</span>&#125;,</span><br><span class="line">         &#123;<span class="attr">name</span>:<span class="string">&#x27;sunwei2&#x27;</span>&#125;</span><br><span class="line">       ]</span><br><span class="line">    <span class="attr">default</span>:</span><br><span class="line">       <span class="keyword">return</span> <span class="string">`</span></span><br><span class="line"><span class="string">          -sunwei</span></span><br><span class="line"><span class="string">          -sunwei2</span></span><br><span class="line"><span class="string">       `</span></span><br><span class="line">  &#125;</span><br><span class="line">&#125;)</span><br><span class="line">.<span class="title function_">formats</span>([<span class="string">&#x27;json&#x27;</span>])</span><br><span class="line"></span><br><span class="line"><span class="comment">//如果访问localhost:3333/users.json 就是json格式的数据,如果强制请求就是:</span></span><br><span class="line">.<span class="title function_">formats</span>([<span class="string">&#x27;json&#x27;</span>,<span class="string">&#x27;html&#x27;</span>],<span class="literal">true</span>)</span><br></pre></td></tr></table></figure></p>
<ol start="2">
<li>访问：localhost:3333/users</li>
</ol>
<h4 id="路由群组："><a href="#路由群组：" class="headerlink" title="路由群组："></a>路由群组：</h4><p>如果有一些路由，需要共享一些特性，比如使用同样的地址前缀，中间件，域名，或者格式。我们可以把这些路由放在一个群组里，然后统一去设置这组路由的特性<br><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="title class_">Route</span></span><br><span class="line">  .<span class="title function_">group</span>(<span class="function">()=&gt;</span>&#123;</span><br><span class="line">    <span class="title class_">Route</span>.<span class="title function_">get</span>(<span class="string">&#x27;users&#x27;</span>,<span class="function">()=&gt;</span><span class="string">&#x27;manage users&#x27;</span>)</span><br><span class="line">    <span class="title class_">Route</span>.<span class="title function_">get</span>(<span class="string">&#x27;posts&#x27;</span>,<span class="function">()=&gt;</span><span class="string">&#x27;manage posts&#x27;</span>)</span><br><span class="line">  &#125;)</span><br><span class="line">  .<span class="title function_">prefix</span>(<span class="string">&#x27;admin&#x27;</span>)</span><br></pre></td></tr></table></figure></p>
<p>有个前缀admin<br>访问localhost:3333/admin/users</p>
<h4 id="单页面应用的路由："><a href="#单页面应用的路由：" class="headerlink" title="单页面应用的路由："></a>单页面应用的路由：</h4><p>如果我们打算为应用再配一个前端应用，那我们的后端应用可以只负责接口部分，就是只为前端应用提供数据或者前端发过来的数据.<br>这样应用的路由部分是在前端那里处理的,所以后端这块只定义接口的路由就行了，这样我们可以定义一个 wildcard route：通配类型的路由<br><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="title class_">Route</span>.<span class="title function_">any</span>(<span class="string">&#x27;*&#x27;</span>,<span class="function">(<span class="params">&#123;view&#125;</span>)=&gt;</span>view.<span class="title function_">render</span>(<span class="string">&#x27;视图名字&#x27;</span>)) <span class="comment">//比如*表示所有的东西。没有定义的路由地址，返回的就是这个welcome(视图名字)的视图</span></span><br></pre></td></tr></table></figure></p>
<h2 id="node-js-请求与相应"><a href="#node-js-请求与相应" class="headerlink" title="node.js 请求与相应"></a>node.js 请求与相应</h2><h3 id="准备"><a href="#准备" class="headerlink" title="准备"></a>准备</h3><ol>
<li><p>得到请求里面的主体内容，先得给应用安装一个 body-parser中间件<br>如果是完整版的话就不需要，不然执行：</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">adonis install @adonisjs/bodyparser</span><br></pre></td></tr></table></figure>
</li>
<li><p>安装完后，注册一个provider,在start的app.js：</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="string">&#x27;@adonisjs/bodyparser/providers/BodyParserProvider&#x27;</span></span><br></pre></td></tr></table></figure>
</li>
<li><p>在kernel.js里面也要注册全局,在globalMiddleware：</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="string">&#x27;Adonis/Middleware/BodyParser&#x27;</span></span><br></pre></td></tr></table></figure>
</li>
<li><p>定义一个路由：</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="title class_">Route</span></span><br><span class="line">   .<span class="title function_">get</span>(<span class="string">&#x27;/posts&#x27;</span>,<span class="function">(<span class="params">&#123;request&#125;</span>)=&gt;</span>&#123;</span><br><span class="line">   &#125;)</span><br></pre></td></tr></table></figure>
<h3 id="查询参数"><a href="#查询参数" class="headerlink" title="查询参数"></a>查询参数</h3><h4 id="查询参数-1"><a href="#查询参数-1" class="headerlink" title="查询参数"></a>查询参数</h4><p>查询参数会作为请求地址的一部分，地址里面的问号后面的东西就是查询参数，还有它们的值，不同的查询参数之间可以使用 &amp; 符号连接到一块儿 </p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">localhost:3333/posts?status=pulish&amp;orderby=create_at</span><br></pre></td></tr></table></figure>
</li>
</ol>
<h4 id="获得查询参数-request-get"><a href="#获得查询参数-request-get" class="headerlink" title="获得查询参数:request.get()"></a>获得查询参数:request.get()</h4><p>设置路由，route.js<br><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="title class_">Route</span></span><br><span class="line">   .<span class="title function_">get</span>(<span class="string">&#x27;/posts&#x27;</span>,<span class="function">(<span class="params">&#123;request&#125;</span>)=&gt;</span>&#123;</span><br><span class="line">    <span class="variable language_">console</span>.<span class="title function_">log</span>(request.<span class="title function_">get</span>());</span><br><span class="line">   &#125;)</span><br></pre></td></tr></table></figure><br>访问：localhost:3333/posts?status=pulish&amp;orderby=create_at<br>返回：<br><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">&#123; status: &#x27;pulish&#x27;, orderby: &#x27;create_at&#x27; &#125;</span><br></pre></td></tr></table></figure><br>直接返回得到的值再响应给客户端：<br><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="title class_">Route</span></span><br><span class="line">   .<span class="title function_">get</span>(<span class="string">&#x27;/posts&#x27;</span>,<span class="function">(<span class="params">&#123;request&#125;</span>)=&gt;</span>request.<span class="title function_">get</span>()</span><br><span class="line">   )</span><br></pre></td></tr></table></figure><br>访问后：localhost:3333/posts?status=pulish&amp;orderby=create_at</p>
<h3 id="请求数据"><a href="#请求数据" class="headerlink" title="请求数据"></a>请求数据</h3><h4 id="请求中的数据"><a href="#请求中的数据" class="headerlink" title="请求中的数据"></a>请求中的数据</h4><ul>
<li>从客户端那里可以向应用的服务端发送数据，服务端收到客户端发送过来的数据，可以决定怎么去处理这些数据，比如把它们保存在应用的数据库里。</li>
<li>一般我们会在应用的服务端定义可以处理客户端发送过来的数据用的路由，然后在应用的前端，或者移动端，可以准备一个表单，让用户在上面填写一些内容，用户提交了表单，会把表单里的数据发送给后端应用。就是带着表单里的数据，去请求支持处理发送数据用的路由的地址。</li>
<li>请求用的 HTTP 方法一般是 <strong>POST，PUT 或者 PATCH</strong> ，在这些请求里面，可以包含一个请求的<strong>主体</strong>， 这个主体里的东西就是要发送给后端应用的数据 。<br>这个主体内容有不同的格式，比如表单，或者JSON 等等。 在服务端那里应该知道怎么去处理这些使用不同格式发送过来的数据。</li>
</ul>
<h4 id="获取请求中的数据"><a href="#获取请求中的数据" class="headerlink" title="获取请求中的数据"></a>获取请求中的数据</h4><p>发送了一个数据请求，又返回来，实际可以保存在数据库之中。<br><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="title class_">Route</span>.<span class="title function_">post</span>(<span class="string">&#x27;/posts&#x27;</span>,<span class="function">(<span class="params">&#123;request&#125;</span>)=&gt;</span>request.<span class="title function_">post</span>())</span><br><span class="line"><span class="comment">//</span></span><br><span class="line"><span class="title class_">Route</span>.<span class="title function_">post</span>(<span class="string">&#x27;/posts&#x27;</span>,<span class="function">(<span class="params">&#123;request&#125;</span>)=&gt;</span>request.<span class="title function_">all</span>())<span class="comment">//获得查询参数</span></span><br><span class="line"><span class="title class_">Route</span>.<span class="title function_">post</span>(<span class="string">&#x27;/posts&#x27;</span>,<span class="function">(<span class="params">&#123;request&#125;</span>)=&gt;</span>request.<span class="title function_">only</span>([<span class="string">&#x27;title&#x27;</span>,<span class="string">&#x27;content&#x27;</span>]))<span class="comment">//单独只获得一组数据</span></span><br><span class="line"><span class="title class_">Route</span>.<span class="title function_">post</span>(<span class="string">&#x27;/posts&#x27;</span>,<span class="function">(<span class="params">&#123;request&#125;</span>)=&gt;</span>request.<span class="title function_">except</span>([<span class="string">&#x27;title&#x27;</span>,<span class="string">&#x27;content&#x27;</span>]))<span class="comment">//除了某组数据</span></span><br><span class="line"><span class="title class_">Route</span>.<span class="title function_">post</span>(<span class="string">&#x27;/posts&#x27;</span>,<span class="function">(<span class="params">&#123;request&#125;</span>)=&gt;</span>request.<span class="title function_">input</span>(<span class="string">&#x27;status&#x27;</span>,<span class="string">&#x27;draft&#x27;</span>))<span class="comment">//获得某个具体的数据，比如status，如果没有的话，值就是第二个参数。</span></span><br></pre></td></tr></table></figure></p>
<p>备注：<br>请求的数据是body，json格式的，注意最后一个没有，<br>{<br>​    “title”:”name”,<br>​    “content”:”sunwei”,<br>​    “status”:”pulish”<br>}<br>，</p>
<ol>
<li>返回的就是所有的body的json值</li>
<li>访问localhost:3333/posts?redirect=home，返回的就是所有的body的json值，加上查询的参数值</li>
<li>只有title和content的值</li>
<li>除了title和content的值</li>
<li>只查询status的值，第二个参数是默认的，如果没有其值的话</li>
</ol>
<h4 id="请求中的集合数据-request-collect"><a href="#请求中的集合数据-request-collect" class="headerlink" title="请求中的集合数据:request.collect"></a>请求中的集合数据:request.collect</h4><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="title class_">Route</span>.<span class="title function_">post</span>(<span class="string">&#x27;/posts&#x27;</span>,<span class="function">(<span class="params">&#123;request&#125;</span>)=&gt;</span>request.<span class="title function_">collect</span>([<span class="string">&#x27;title&#x27;</span>,<span class="string">&#x27;content&#x27;</span>]))</span><br></pre></td></tr></table></figure>
<p>集合form数据<img src="evernotecid://9A67477A-D574-4790-9D02-79AC4C197FC4/appyinxiangcom/9302176/ENResource/p1239" alt="128c5e493e540cec5fe9447d06da7dd8.png">不能用requese.only的方法，用request.collect的方法<br>如果用request.only的话，就是返回这样的数据，无法使用<br><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">&#123;</span><br><span class="line">    &quot;title&quot;: [</span><br><span class="line">        &quot;sunwei&quot;,</span><br><span class="line">        &quot;sunwei2&quot;</span><br><span class="line">    ],</span><br><span class="line">    &quot;content&quot;: [</span><br><span class="line">        &quot;name&quot;,</span><br><span class="line">        &quot;sex&quot;</span><br><span class="line">    ]</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></p>
<p>collect返回的数据就是：<br><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">[</span><br><span class="line">    &#123;</span><br><span class="line">        &quot;title&quot;: &quot;sunwei&quot;,</span><br><span class="line">        &quot;content&quot;: &quot;name&quot;</span><br><span class="line">    &#125;,</span><br><span class="line">    &#123;</span><br><span class="line">        &quot;title&quot;: &quot;sunwei2&quot;,</span><br><span class="line">        &quot;content&quot;: &quot;sex&quot;</span><br><span class="line">    &#125;</span><br></pre></td></tr></table></figure></p>
<h3 id="头部信息"><a href="#头部信息" class="headerlink" title="头部信息"></a>头部信息</h3><p>头部信息，它是客户端与服务端沟通交流的一种方式 . 客户端请求的时候可以带一些头部信息，服务端响应的时候也可以带一些头部信息 。<br>有的是自动设置的，有的时候我们也会自己额外添加，比如jwt的身份验证。</p>
<h4 id="获取头部信息：headers（）方法"><a href="#获取头部信息：headers（）方法" class="headerlink" title="获取头部信息：headers（）方法"></a>获取头部信息：headers（）方法</h4><p>get的headers的方法,请求回来的值就是所有的头部信息<br><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="title class_">Route</span>.<span class="title function_">get</span>(<span class="string">&#x27;/posts&#x27;</span>,<span class="function">(<span class="params">&#123;request&#125;</span>)=&gt;</span>request.<span class="title function_">headers</span>()) </span><br></pre></td></tr></table></figure><br>具体的一条头部信息：<br><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="title class_">Route</span>.<span class="title function_">get</span>(<span class="string">&#x27;/posts&#x27;</span>,<span class="function">(<span class="params">&#123;request&#125;</span>)=&gt;</span>request.<span class="title function_">header</span>(<span class="string">&#x27;user-agent&#x27;</span>))</span><br></pre></td></tr></table></figure></p>
<h4 id="设置响应头部信息：response-header"><a href="#设置响应头部信息：response-header" class="headerlink" title="设置响应头部信息：response.header"></a>设置响应头部信息：response.header</h4><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="title class_">Route</span>.<span class="title function_">get</span>(<span class="string">&#x27;/posts&#x27;</span>,<span class="function">(<span class="params">&#123;request&#125;</span>)=&gt;</span>&#123;</span><br><span class="line">  <span class="keyword">return</span> <span class="string">&#x27;&lt;h1&gt;List of posts.&lt;/h1&gt;&#x27;</span></span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure>
<p>这时候响应的是html；可以在控制台network上看到<br> 设置：<br><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="title class_">Route</span>.<span class="title function_">get</span>(<span class="string">&#x27;/posts&#x27;</span>,<span class="function">(<span class="params">&#123;request,response&#125;</span>)=&gt;</span>&#123;</span><br><span class="line">  <span class="comment">// response.header(&#x27;Content-type&#x27;,&#x27;text/plain&#x27;)，respense.header方法设置响应的头部信息，后面是两个参数的值。</span></span><br><span class="line">  response.<span class="title function_">type</span>(<span class="string">&#x27;text/plain&#x27;</span>)<span class="comment">//这是简单的方法</span></span><br><span class="line">  <span class="keyword">return</span> <span class="string">&#x27;&lt;h1&gt;List of posts.&lt;/h1&gt;&#x27;</span></span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure><br>这样就是纯文本信息了。查询用MIME type查询</p>
<h4 id="Cookies"><a href="#Cookies" class="headerlink" title="Cookies"></a>Cookies</h4><p>服务端在客户端那里存储的一小块数据 ，在客户端那里存储数据，除了 cookie，我们还可以使用 Storage API ，比如 localStorage,sessionStorage ，还有 Indexed DB 。<br>设置和获取cookies<br><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="title class_">Route</span>.<span class="title function_">get</span>(<span class="string">&#x27;/posts&#x27;</span>,<span class="function">(<span class="params">&#123;request,response&#125;</span>)=&gt;</span>&#123;</span><br><span class="line">  <span class="keyword">return</span> request.<span class="title function_">headers</span>()</span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure><br>请求：localhost:3333/posts<br>可以看到头部信息里面cookies的数据，在application里面可以找到cookies的数据，<br>1、读取cookie数据，可以用request.cookies的方法.<br>2、设置cookie可以用response的cookie方法，第一个是cookie的名字，第二个是cookie的值<br>3、具体某个值可以用cookie(‘’)的方法,第二个参数是默认的值<br>4、删除cookie：response.clearCookie(‘sunwei’)</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="title class_">Route</span>.<span class="title function_">get</span>(<span class="string">&#x27;/posts&#x27;</span>,<span class="function">(<span class="params">&#123;request,response&#125;</span>)=&gt;</span>&#123;</span><br><span class="line">  response.<span class="title function_">cookie</span>(<span class="string">&#x27;sunwei&#x27;</span>,<span class="string">&#x27;nb&#x27;</span>)</span><br><span class="line">  response.<span class="title function_">clearCookie</span>(<span class="string">&#x27;sunwei&#x27;</span>)</span><br><span class="line">  <span class="comment">// return request.cookies()</span></span><br><span class="line">  <span class="keyword">return</span> request.<span class="title function_">cookie</span>(<span class="string">&#x27;sunwei&#x27;</span>,<span class="string">&#x27;light&#x27;</span>)</span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure>
<h3 id="响应"><a href="#响应" class="headerlink" title="响应"></a>响应</h3><ul>
<li>客户端对服务端发出各种请求，服务端可以根据请求响应回对应的数据 做出响应的时候除了带着具体的请求需要的数据，还可以设置响应的头部信息，Cookies ，还有状态码这些东西。在客户端那里可以根据这些信息来判断到底应该怎么使用响应回来的数据</li>
<li>Get的方法,响应数据用response.send（）方法。<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="title class_">Route</span>.<span class="title function_">get</span>(<span class="string">&#x27;/posts&#x27;</span>,<span class="function">(<span class="params">&#123;response&#125;</span>)=&gt;</span>&#123;</span><br><span class="line">  <span class="comment">// response.send(&#x27;list of post&#x27;)</span></span><br><span class="line">  <span class="comment">// return &#x27;list of posts.&#x27;</span></span><br><span class="line">  <span class="keyword">return</span> &#123;</span><br><span class="line">     <span class="attr">title</span>:<span class="string">&#x27;list of posts.&#x27;</span></span><br><span class="line">  &#125;</span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure>
这边访问后，是text的格式<br>如果返回的是一个{},那就是自动成为json格式的数据</li>
</ul>
<h3 id="异步响应：async-await"><a href="#异步响应：async-await" class="headerlink" title="异步响应：async,await"></a>异步响应：async,await</h3><p>对请求做出响应的时候，有可能不会马上得到要响应的数据。我们可以使用 async，await，这就需要执行的操作必须返回的是 Promise<br><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> <span class="title function_">delay</span> = (<span class="params">data,time</span>) =&gt;&#123;</span><br><span class="line">   <span class="keyword">return</span> <span class="keyword">new</span> <span class="title class_">Promise</span>(<span class="function">(<span class="params">resolve,reject</span>) =&gt;</span> &#123;</span><br><span class="line">    <span class="built_in">setTimeout</span>(<span class="function">()=&gt;</span>&#123;</span><br><span class="line">      <span class="title function_">resolve</span>(data)</span><br><span class="line">    &#125;,time)</span><br><span class="line">   &#125;)</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="title class_">Route</span>.<span class="title function_">get</span>(<span class="string">&#x27;/posts&#x27;</span>,<span class="keyword">async</span> (&#123;response&#125;)=&gt;&#123;</span><br><span class="line">  <span class="keyword">const</span> data =<span class="keyword">await</span> <span class="title function_">delay</span>(</span><br><span class="line">    <span class="string">&#x27;list of posts&#x27;</span>,</span><br><span class="line">    <span class="number">3000</span> )<span class="comment">//一个是数据，一个是响应时间</span></span><br><span class="line">  <span class="keyword">return</span> data  </span><br><span class="line">&#125;)</span><br><span class="line"></span><br><span class="line">重定向：<span class="title class_">Route</span>.<span class="title function_">get</span>(<span class="string">&#x27;/list-of-posts&#x27;</span>,<span class="function">(<span class="params">&#123;response&#125;</span>)=&gt;</span>&#123;</span><br><span class="line">  response.<span class="title function_">redirect</span>(<span class="string">&#x27;/posts&#x27;</span>)</span><br><span class="line">&#125;)</span><br><span class="line"></span><br><span class="line"><span class="title class_">Route</span>.<span class="title function_">get</span>(<span class="string">&#x27;/posts&#x27;</span>,<span class="function">()=&gt;</span>&#123;</span><br><span class="line">  <span class="keyword">return</span> <span class="string">&#x27;List of posts&#x27;</span></span><br><span class="line">&#125;)</span><br><span class="line"><span class="title class_">Route</span>.<span class="title function_">get</span>(<span class="string">&#x27;/list-of-posts&#x27;</span>,<span class="function">(<span class="params">&#123;response&#125;</span>)=&gt;</span>&#123;</span><br><span class="line">  response.<span class="title function_">redirect</span>(<span class="string">&#x27;/posts&#x27;</span>)</span><br><span class="line">&#125;)</span><br><span class="line"></span><br><span class="line"><span class="title class_">Route</span>.<span class="title function_">get</span>(<span class="string">&#x27;/posts&#x27;</span>,<span class="function">()=&gt;</span>&#123;</span><br><span class="line">  <span class="keyword">return</span> <span class="string">&#x27;List of posts&#x27;</span></span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure></p>
<h4 id="重定向"><a href="#重定向" class="headerlink" title="重定向"></a>重定向</h4><p>访问一个地址，再把请求重新定向到另一个地址：<br>get方法，response.redirect()方法<br><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">重定向：<span class="title class_">Route</span>.<span class="title function_">get</span>(<span class="string">&#x27;/list-of-posts&#x27;</span>,<span class="function">(<span class="params">&#123;response&#125;</span>)=&gt;</span>&#123;</span><br><span class="line">  response.<span class="title function_">redirect</span>(<span class="string">&#x27;/posts&#x27;</span>,<span class="literal">true</span>,<span class="number">301</span>)<span class="comment">//重定向带头部信息查询参数，第二个地址为true，状态码为第三个参数 301</span></span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure><br>使用路由名称和response.route方法重定向以及带参：<br><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="title class_">Route</span>.<span class="title function_">get</span>(<span class="string">&#x27;/list-of-posts&#x27;</span>,<span class="function">(<span class="params">&#123;response&#125;</span>)=&gt;</span>&#123;</span><br><span class="line">  response.<span class="title function_">route</span>(<span class="string">&#x27;list-of-posts&#x27;</span>,&#123;<span class="attr">catagory</span>:food&#125; )</span><br><span class="line">&#125;)<span class="comment">//第二个参数是catagory</span></span><br><span class="line"></span><br><span class="line"><span class="title class_">Route</span></span><br><span class="line">  .<span class="title function_">get</span>(<span class="string">&#x27;/posts/:catagory?&#x27;</span>,<span class="function">(<span class="params">&#123;params&#125;</span>)=&gt;</span>&#123;</span><br><span class="line">  <span class="keyword">return</span> <span class="string">`List of <span class="subst">$&#123;params.catagory || <span class="string">&#x27;default&#x27;</span>&#125;</span> posts`</span></span><br><span class="line">&#125;)</span><br><span class="line">  .<span class="title function_">as</span>(<span class="string">&#x27;list-of-posts&#x27;</span>)</span><br></pre></td></tr></table></figure></p>
<h2 id="视图-1"><a href="#视图-1" class="headerlink" title="视图"></a>视图</h2><h3 id="准备与介绍"><a href="#准备与介绍" class="headerlink" title="准备与介绍"></a>准备与介绍</h3><p>模版引擎：Edge.js<br>app.js 的viewprodiver<br>设置一个资源的路由：(文章，评论，用户<br><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="title class_">Route</span>.<span class="title function_">resource</span>(<span class="string">&#x27;/posts&#x27;</span>,<span class="string">&#x27;PostController&#x27;</span>)</span><br></pre></td></tr></table></figure><br>cmd创建一个一个视图文件：<br>adonis make:view posts.index<br>然后在index.edge里面搞一个h1<br>访问： localhost:3333/posts<br>传递与使用值<br>在视图里，绑定输出传递过来的数据， 用的是两组大括号，里面添加一个 pageTitle<br>控制器里：<br><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">class</span> <span class="title class_">PostController</span> &#123;</span><br><span class="line">   <span class="title function_">index</span>(<span class="params">&#123;view&#125;</span>)&#123;</span><br><span class="line">     <span class="keyword">const</span> pageTitle = <span class="string">&#x27;list of posts &#x27;</span></span><br><span class="line">     <span class="keyword">return</span> view.<span class="title function_">render</span>(<span class="string">&#x27;posts.index&#x27;</span>,&#123;pageTitle&#125;)</span><br><span class="line">   &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><br>view视图里面<br><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">&lt;h1&gt;&#123;&#123; pageTitle || <span class="string">&#x27;Untitled&#x27;</span> &#125;&#125; &lt;/h1&gt;</span><br></pre></td></tr></table></figure><br>如果前面加@。则不会渲染两组大括号<br>如果要渲染控制器的html标签 则是3组大括号</p>
<h4 id="条件-if"><a href="#条件-if" class="headerlink" title="条件 @if"></a>条件 @if</h4><p>判断条件，可以使用一个 @if ，在 Edge 模板引擎里面，这些用 @ 符号开头的东西一般叫 Tags ， if 是个标签的名字 ，endif结尾，其他用elseif来，或者else<br>index.edge:<br><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">@<span class="keyword">if</span>(user.<span class="property">name</span>)</span><br><span class="line">&#123;&#123;user.<span class="property">name</span>&#125;&#125;</span><br><span class="line">@<span class="keyword">else</span></span><br><span class="line">login/signup</span><br><span class="line">@endif</span><br></pre></td></tr></table></figure><br>控制器：<br><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">class</span> <span class="title class_">PostController</span> &#123;</span><br><span class="line">   <span class="title function_">index</span>(<span class="params">&#123;view&#125;</span>)&#123;</span><br><span class="line">     <span class="keyword">const</span> pageTitle = <span class="string">&#x27;list of posts &#x27;</span></span><br><span class="line">     <span class="keyword">const</span> user =&#123;</span><br><span class="line">       <span class="attr">name</span>:<span class="string">&#x27;sunwei&#x27;</span></span><br><span class="line">     &#125;</span><br><span class="line">     <span class="keyword">return</span> view.<span class="title function_">render</span>(<span class="string">&#x27;posts.index&#x27;</span>,&#123;pageTitle,user&#125;)</span><br><span class="line">   &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></p>
<h3 id="迭代：Iteration"><a href="#迭代：Iteration" class="headerlink" title="迭代：Iteration"></a>迭代：Iteration</h3><p>用@each方法<br>index.edge<br><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">@<span class="title function_">each</span>(entity <span class="keyword">in</span> entities)</span><br><span class="line">  &lt;div&gt;</span><br><span class="line">    <span class="language-xml"><span class="tag">&lt;<span class="name">small</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">      &#123;&#123;$loop.index+1&#125;&#125;.</span></span><br><span class="line"><span class="language-xml">    <span class="tag">&lt;/<span class="name">small</span>&gt;</span></span></span><br><span class="line">    &#123;&#123;entity.<span class="property">title</span>&#125;&#125;:&#123;&#123;entity.<span class="property">content</span>&#125;&#125;</span><br><span class="line">  &lt;/div&gt;</span><br><span class="line">@endeach</span><br></pre></td></tr></table></figure></p>
<h3 id="布局："><a href="#布局：" class="headerlink" title="布局："></a>布局：</h3><p>就是在视图里面可以重复使用的页面的模板<br>放在views——layouts——main.js<br>在index.edge中<br><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">@<span class="title function_">layout</span>(‘layouts.<span class="property">main</span><span class="string">&#x27;)</span></span><br></pre></td></tr></table></figure><br>设置section<br>如果没有设置内容，就显示section</p>
</div><div class="article-tags is-size-7 mb-4"><span class="mr-2">#</span><a class="link-muted mr-2" rel="tag" href="/tags/js/">js</a><a class="link-muted mr-2" rel="tag" href="/tags/%E5%90%8E%E7%AB%AF/">后端</a></div><!--!--></article></div><!--!--><nav class="post-navigation mt-4 level is-mobile"><div class="level-start"><a class="article-nav-prev level level-item link-muted" href="/2018/11/14/Wp%E4%B8%AD%E6%95%B0%E6%8D%AE%E5%BA%93Error%E7%9A%84%E8%A7%A3%E5%86%B3%E6%96%B9%E6%B3%95/"><i class="level-item fas fa-chevron-left"></i><span class="level-item">WP的buffer pool报错导致数据库Error的解决方法</span></a></div><div class="level-end"><a class="article-nav-next level level-item link-muted" href="/2018/03/25/Tensorflow-%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0/"><span class="level-item">Tensorflow 学习笔记</span><i class="level-item fas fa-chevron-right"></i></a></div></nav><!--!--></div><div class="column column-left is-4-tablet is-4-desktop is-3-widescreen  order-1"><div class="card widget" data-type="profile"><div class="card-content"><nav class="level"><div class="level-item has-text-centered flex-shrink-1"><div><figure class="image is-128x128 mx-auto mb-2"><img class="avatar" src="https://ws1.sinaimg.cn/large/a794a8ccgy1fx6gjojk0jj20fd0fdtrr.jpg" alt="Mr.Sun"></figure><p class="title is-size-4 is-block" style="line-height:inherit;">Mr.Sun</p><p class="is-size-6 is-block">技术创业者；户外爱好者</p><p class="is-size-6 is-flex justify-content-center"><i class="fas fa-map-marker-alt mr-1"></i><span>南京，中国</span></p></div></div></nav><nav class="level is-mobile"><div class="level-item has-text-centered is-marginless"><div><p class="heading">Posts</p><a href="/archives"><p class="title">14</p></a></div></div><div class="level-item has-text-centered is-marginless"><div><p class="heading">Categories</p><a href="/categories"><p class="title">2</p></a></div></div><div class="level-item has-text-centered is-marginless"><div><p class="heading">Tags</p><a href="/tags"><p class="title">11</p></a></div></div></nav><div class="level"><a class="level-item button is-primary is-rounded" href="https://weibo.cn/diosmios" target="_blank" rel="noopener">Follow</a></div><div class="level is-mobile is-multiline"><a class="level-item button is-transparent is-marginless" target="_blank" rel="noopener" title="Github" href="http://github.com/gini0"><i class="fab fa-github"></i></a><a class="level-item button is-transparent is-marginless" target="_blank" rel="noopener" title="Ins" href="https://www.instagram.com/gini0.2"><i class="fab fa-instagram"></i></a><a class="level-item button is-transparent is-marginless" target="_blank" rel="noopener" title="Wechat" href="whttps://ws1.sinaimg.cn/large/a794a8ccgy1fx6h04sne7j20iq0owjty.jpg"><i class="fab fa-weixin"></i></a><a class="level-item button is-transparent is-marginless" target="_blank" rel="noopener" title="QQ" href="http://wpa.qq.com/msgrd?v=3&amp;uin=605761927&amp;site=qq&amp;menu=yes"><i class="fab fa-qq"></i></a></div></div></div><!--!--><div class="card widget" data-type="links"><div class="card-content"><div class="menu"><h3 class="menu-label">Links</h3><ul class="menu-list"><li><a class="level is-mobile" href="https://www.huifoutech.com" target="_blank" rel="noopener"><span class="level-left"><span class="level-item">会否科技</span></span><span class="level-right"><span class="level-item tag">www.huifoutech.com</span></span></a></li><li><a class="level is-mobile" href="https://lovegear.taobao.com" target="_blank" rel="noopener"><span class="level-left"><span class="level-item">户外小店</span></span><span class="level-right"><span class="level-item tag">lovegear.taobao.com</span></span></a></li></ul></div></div></div><div class="column-right-shadow is-hidden-widescreen"></div></div><div class="column column-right is-4-tablet is-4-desktop is-3-widescreen is-hidden-touch is-hidden-desktop-only order-3"><div class="card widget" data-type="recent-posts"><div class="card-content"><h3 class="menu-label">Recents</h3><article class="media"><div class="media-content"><p class="date"><time dateTime="2020-10-07T12:20:48.000Z">2020-10-07</time></p><p class="title"><a href="/2020/10/07/yhun%202/">For Honey Yhun</a></p><p class="categories"><a href="/categories/%E7%94%9F%E6%B4%BB/">生活</a></p></div></article><article class="media"><div class="media-content"><p class="date"><time dateTime="2020-03-07T12:20:48.000Z">2020-03-07</time></p><p class="title"><a href="/2020/03/07/yhun/">For Honey Yhun</a></p><p class="categories"><a href="/categories/%E7%94%9F%E6%B4%BB/">生活</a></p></div></article><article class="media"><div class="media-content"><p class="date"><time dateTime="2020-02-01T04:10:48.000Z">2020-02-01</time></p><p class="title"><a href="/2020/02/01/%E4%BB%8A%E5%A4%A9%E7%9C%8B%E4%BA%8643%E5%9C%BA%E6%97%A5%E8%90%BD/">2020年2月1号</a></p><p class="categories"><a href="/categories/%E7%94%9F%E6%B4%BB/">生活</a></p></div></article><article class="media"><div class="media-content"><p class="date"><time dateTime="2018-12-11T05:25:31.000Z">2018-12-11</time></p><p class="title"><a href="/2018/12/11/%E5%8D%8E%E4%B8%BA%E6%9C%80%E5%A4%A7%E7%9A%84%E7%89%9B%E9%80%BC/">华为最大的牛逼</a></p><p class="categories"><a href="/categories/%E7%94%9F%E6%B4%BB/">生活</a></p></div></article><article class="media"><div class="media-content"><p class="date"><time dateTime="2018-11-29T12:50:49.000Z">2018-11-29</time></p><p class="title"><a href="/2018/11/29/%E5%85%AC%E5%85%B1%E4%BA%A7%E5%93%81%E7%9A%84%E5%95%86%E4%B8%9A%E6%A1%8E%E6%A2%8F/">公共产品的商业桎梏</a></p><p class="categories"><a href="/categories/%E7%94%9F%E6%B4%BB/">生活</a></p></div></article></div></div></div></div></div></section><footer class="footer"><div class="container"><div class="level"><div class="level-start"><a class="footer-logo is-block mb-2" href="/"><img src="/images/logo.jpeg" alt="Mr.sun的东鳞西爪" height="28"></a><p class="is-size-7"><span>&copy; 2022 SW</span>  Powered by <a href="https://hexo.io/" target="_blank" rel="noopener">Hexo</a> &amp; <a href="https://github.com/ppoffice/hexo-theme-icarus" target="_blank" rel="noopener">Icarus</a></p></div><div class="level-end"></div></div></div></footer><script src="https://cdn.jsdelivr.net/npm/jquery@3.3.1/dist/jquery.min.js"></script><script src="https://cdn.jsdelivr.net/npm/moment@2.22.2/min/moment-with-locales.min.js"></script><script src="https://cdn.jsdelivr.net/npm/clipboard@2.0.4/dist/clipboard.min.js" defer></script><script>moment.locale("en");</script><script>var IcarusThemeSettings = {
            article: {
                highlight: {
                    clipboard: true,
                    fold: 'unfolded'
                }
            }
        };</script><script src="/js/column.js"></script><script src="https://cdn.jsdelivr.net/npm/lightgallery@1.10.0/dist/js/lightgallery.min.js" defer></script><script src="https://cdn.jsdelivr.net/npm/justifiedGallery@3.8.1/dist/js/jquery.justifiedGallery.min.js" defer></script><script>window.addEventListener("load", () => {
            if (typeof $.fn.lightGallery === 'function') {
                $('.article').lightGallery({ selector: '.gallery-item' });
            }
            if (typeof $.fn.justifiedGallery === 'function') {
                if ($('.justified-gallery > p > .gallery-item').length) {
                    $('.justified-gallery > p > .gallery-item').unwrap();
                }
                $('.justified-gallery').justifiedGallery();
            }
        });</script><script src="/js/animation.js"></script><script type="text/x-mathjax-config">MathJax.Hub.Config({
            'HTML-CSS': {
                matchFontHeight: false
            },
            SVG: {
                matchFontHeight: false
            },
            CommonHTML: {
                matchFontHeight: false
            },
            tex2jax: {
                inlineMath: [
                    ['$','$'],
                    ['\\(','\\)']
                ]
            }
        });</script><script src="https://cdn.jsdelivr.net/npm/mathjax@2.7.9/unpacked/MathJax.js?config=TeX-MML-AM_CHTML" defer></script><!--!--><!--!--><script src="/js/main.js" defer></script><div class="searchbox"><div class="searchbox-container"><div class="searchbox-header"><div class="searchbox-input-container"><input class="searchbox-input" type="text" placeholder="Type something..."></div><a class="searchbox-close" href="javascript:;">×</a></div><div class="searchbox-body"></div></div></div><script src="/js/insight.js" defer></script><script>document.addEventListener('DOMContentLoaded', function () {
            loadInsight({"contentUrl":"/content.json"}, {"hint":"Type something...","untitled":"(Untitled)","posts":"Posts","pages":"Pages","categories":"Categories","tags":"Tags"});
        });</script></body></html>